<html>
  <head>
    <script
      src="https://unpkg.com/lightweight-charts@4.0.0/dist/lightweight-charts.standalone.production.js"
      type="text/javascript"
    ></script>
    <script
      src="qrc:///qtwebchannel/qwebchannel.js"
      type="text/javascript"
    ></script>
  </head>
  <body style="height: 100%; margin: 0; padding: 0; overflow: hidden">
    <div id="chart" style="width: 100%; height: 100%"></div>

    <script>
      new QWebChannel(qt.webChannelTransport, function (channel) {
        window.bridge = channel.objects.bridge;
        window.bridge.receiveFromJS("Test");
        window.bridge.sendData.connect((data) => {
          console.log(data);
        });

        const chart = LightweightCharts.createChart(
          document.getElementById("chart"),
        );

        const series = chart.addLineSeries();
        series.setData([
          { time: "2025-08-06", value: 100 },
          { time: "2025-08-07", value: 105 },
          { time: "2025-08-08", value: 103 },
        ]);

        window.addEventListener("resize", () => {
          chart.resize(window.innerWidth, window.innerHeight);
        });
      });
    </script>
  </body>
</html>
